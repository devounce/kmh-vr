<!DOCTYPE html>
<html>
<head>
  <title>クイズ1</title>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <style>
    #loading {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 2em;
      color: white;
      display: none; /* 初期状態では非表示 */
    }
    #quiz-container, #result-message {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      display: none; /* 初期状態では非表示 */
    }
    #result-message {
      font-size: 3em;
      color: white;
    }
  </style>
</head>
<body>
  <div id="loading">動画を読み込んでいます...</div>

  <a-scene embedded vr-mode-ui="enabled: true" renderer="antialias: true">
    <a-assets>
      <video id="vid" src="https://devounce.io/projects/kmh-vr/videos/quiz_manual-3.25.mp4"></video>
    </a-assets>

    <a-videosphere src="#vid"></a-videosphere>
  </a-scene>

  <div id="quiz-container">
    <h1>クイズ1</h1>
    <p>アトロピンを準備したが、何mg投与した？</p>
    <button onclick="submitAnswer('A')">A: アトロピン1mg</button>
    <button onclick="submitAnswer('B')">B: アトロピン2mg</button>
    <button onclick="submitAnswer('C')">C: アトロピン3mg</button>
  </div>

  <div id="result-message"></div>

  <script>
    var videoEl = document.querySelector('#vid');
    var loadingEl = document.getElementById('loading');
    var quizContainer = document.getElementById('quiz-container');
    var resultMessage = document.getElementById('result-message');

    // Video loading
    videoEl.onloadeddata = function() {
      loadingEl.style.display = 'none';
      videoEl.play();
    };

    // Video ended
    videoEl.onended = function() {
      quizContainer.style.display = 'flex';
    };

    // Submit answer
    function submitAnswer(selectedAnswer) {
      const correctAnswer = 'A';
      if (selectedAnswer === correctAnswer) {
        resultMessage.innerText = '正解！';
        resultMessage.style.display = 'block';
        // Redirect to the next video after a short delay
        setTimeout(function() {
          window.location.href = 'quiz2.html';
        }, 2000);
      } else {
        resultMessage.innerText = '不正解...';
        resultMessage.style.display = 'block';
        // Replay the same video after a short delay
        setTimeout(function() {
          videoEl.play();
          resultMessage.style.display = 'none';
        }, 2000);
      }
    }
  </script>

  <!-- quiz_logic.js is not needed anymore since logic is handled inline -->
</body>
</html>
