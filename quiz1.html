<!DOCTYPE html>
<html>
<head>
  <title>クイズ1</title>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <style>
    #result-message {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 2em;
      color: white;
      display: none; /* 初期状態では非表示 */
    }
    #quiz-container {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 80%; /* コンテナの幅 */
      background: rgba(0, 0, 0, 0.7); /* 半透明の黒背景 */
      color: white; /* 文字色 */
      padding: 20px; /* 内側の余白 */
      box-sizing: border-box;
      border-radius: 10px; /* 角の丸み */
      display: none; /* 初期状態では非表示 */
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
  
    #quiz-container h1 {
      font-size: 2em; /* タイトルのフォントサイズ */
      margin-bottom: 10px; /* タイトルの下の余白 */
    }
  
    #quiz-container p {
      font-size: 1.5em; /* パラグラフのフォントサイズ */
      margin-bottom: 20px; /* パラグラフの下の余白 */
    }
  
    #quiz-container button {
      font-size: 1.2em; /* ボタンのフォントサイズ */
      color: #000; /* ボタンの文字色 */
      background: #FFF; /* ボタンの背景色 */
      border: none; /* ボタンの境界線無し */
      padding: 10px 20px; /* ボタンの内側の余白 */
      margin: 5px; /* ボタンの外側の余白 */
      border-radius: 5px; /* ボタンの角の丸み */
      cursor: pointer; /* カーソルをポインターに */
    }
  
    #quiz-container button:hover {
      background: #ddd; /* ホバー時の背景色 */
    }
</style>
</head>
<body>
  <a-scene>
    <a-assets>
      <video id="vid" autoplay src="https://devounce.io/projects/kmh-vr/videos/quiz_manual-3.25.mp4" crossorigin="anonymous"></video>
    </a-assets>

    <a-videosphere src="#vid" id="videoSphere"></a-videosphere>
  </a-scene>

  <div id="result-message"></div>

  <div id="quiz-container">
    <h1>クイズ1</h1>
    <p>アトロピンを準備したが、何mg投与した？</p>
    <button onclick="submitAnswer('A')">A: アトロピン1mg</button>
    <button onclick="submitAnswer('B')">B: アトロピン2mg</button>
    <button onclick="submitAnswer('C')">C: アトロピン3mg</button>
  </div>

  <script>
    var videoEl = document.querySelector('#vid');
    var videoSphere = document.querySelector('#videoSphere');
    var resultMessageEl = document.getElementById('result-message');
    var quizContainer = document.getElementById('quiz-container');

    videoSphere.addEventListener('materialvideoended', function () {
      quizContainer.style.display = 'flex';
    });

    function submitAnswer(selectedAnswer) {
      var correctAnswer = 'A'; // 正解の答え
      resultMessageEl.style.display = 'block';
      if (selectedAnswer === correctAnswer) {
        resultMessageEl.textContent = '正解！';
        setTimeout(function() {
          window.location.href = 'quiz2.html'; // 次のクイズへ
        }, 2000); // 2秒後に遷移
      } else {
        resultMessageEl.textContent = '不正解...';
        setTimeout(function() {
          videoEl.play(); // 動画を再再生
          resultMessageEl.style.display = 'none';
        }, 2000); // 2秒後に再再生
      }
    }
  </script>

  <script src="quiz_logic.js"></script>
</body>
</html>
